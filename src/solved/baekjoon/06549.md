# 6549. 히스토그램에서 가장 큰 직사각형

특정 인덱스를 기준으로 좌우에서 자기보다 작은 원소가 처음 등장하는 위치를 찾는 문제.

이걸 모든 원소에 대해 수행해야 하기 때문에 단순하게 돌려버리면 $O(n^2)$이다.

일단 모든 원소를 다 찾아봐야 하는건 맞으니, $n$은 안고 가야 한다. 그러면 양쪽 원소 쿼리를 $log(n)$ 혹은 비슷한 수준으로 줄여버리면 된다.

일단 탐색 방법부터 생각해보자.

$n$개의 원소 중에 조건을 만족하는 인덱스를 $log(n)$만에 찾는 방법... 이분 탐색이다. 범위를 반씩 좁혀가면서 여기 저보다 작은거 있나요? 하고 물어보면 되겠다.

그렇다면 특정 구간에 대한 최소값을 $O(n)$보다 빠른 시간 안에 찾아야 한다. 그렇다. 세그먼트 트리다.

쿼리 결과로 구간 최소값을 알고 싶으니 구간 최소값을 저장하는 세그먼트 트리를 구성하고 범위 잘라서 쿼리를 날리면?

$n$개의 원소에 대해 $log(n)$의 시간이 걸리는 쿼리를 $log(n)$번 처리하는 것이니, 시간 복잡도를 맞출 수 있다.

이 문제는 풀이가 다양한 것으로도 유명한데 스택, 유량 파인더, 투 포인터 + 분할 정복 등 다양한 풀이 방법이 있다고 한다.

나중에 스택이랑 투 포인터 정도는 구현해볼까 싶다.

여담으로 문제를 똑바로 안 읽어서 피를 좀 봤다.

각 테스트 케이스별로 맨 처음에 직사각형의 개수 $n$이 주어지는데 이걸 그냥 넓이라고 생각했다.

8%에서 뻗어서 뭘까 하고 고민을 계속 했는데, 문제를 똑바로 안 읽었네...
