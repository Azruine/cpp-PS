# [9일차](day09.cpp)

맵다

파트 1은 점이 500개라서 단순 브포로 끝난다.

문제가 파트2인데, 얘는 직사각형과 오목 다각형간의 겹침을 판정해야 한다.

그래서 기존에 만들어놨던 [기하학 헤더](../../template/geo.cpp)를 쓰려고 했는데, 문제가 다각형 겹침은 내가 구현을 하다 말았다...

선분 판정의 경우에는 백준 선분 교차 문제에서 마스크만 조금씩 바꾸면 될 정도로 만들었는데 다각형은 도저히 못 하겠어서 내려놨었는데 하필 이게 다각형 교집합 판정이 나오네

아무튼, 그래서 온갖 삽질을 다 했다.

처음에는 그냥 [다각형 겹침 함수](../../template/geo.cpp#558)에서 플래그만 좀 수정해서 쓰려고 했는데, 문제가 변끼리 겹치는 경우를 내가 분리를 잘 안 해놨다. 그래서 실패

다음에는 에라 모르겠다 브포를 시전하려고 했으나... 너무 오래 걸렸다.

구체적으로 직사각형의 모든 변 위의 점이 다각형 내부에 있나? 보려고 했는데, 이거 진짜 오래 걸린다.

대충 계산해보면 $N^3 \times (cordinate\space gap)$인데, 좌표는 $10^5$에다 $N=500$ 이니까 대충 따져봐도 11승이다.

그래서 반대로 생각을 해서, 다각형의 꼭지점이 직사각형 내부로 들어오는지 여부를 판별하기로 했다.

여기에 직사각형 - 다각형 변끼지 교차하는지 여부를 따지고, 직사각형의 모든 꼭지점이 다각형의 내부로 들어가는지까지 따져주었다.

이렇게 세 가지 조건을 다 돌리고 최적화를 좀 걸어주니 내 시스템 기준 0.6s 정도로, 꽤나 빠르게 돌아간다.

솔직히 기하학 헤더로 날먹했다.
