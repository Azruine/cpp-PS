# 20151. [선분 교차 5](./20151.cpp)

기본 틀은 기존의 선분 교차 문제들과 유사하다. 하지만 이번엔 판정할 개수가 늘어났고, 끝점끼리 만나는 경우를 제외해야 한다.

그래서 나이브하게 선분 두 개를 집어서 교차 판정을 하는게 아니고 $O(NlogN)$시간에 전체 판정을 끝내야 하며, 이는 샤모스 호이 알고리즘으로 가능하다.

C++에서는 set을 사용하면 쉽?게 구현할 수 있다.

주의할 것이 있는데, 바로 set의 비교 함수는 항상 동일해야 한다는 것이다.

샤모스 호이 알고리즘 특성상 일반적으로는 set의 비교 함수가 고장날 일이 없지만 이 문제처럼 끝에서 만나는 경우를 다르게 취급하려면 문제가 생긴다.

[이 링크](https://qwerasdfzxcl.tistory.com/18)에 관련된 설명이 잘 되어 있다.
