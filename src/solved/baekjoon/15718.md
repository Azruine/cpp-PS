# 15718 [돌아온 떡파이어](./15718.cpp)

조합론 문제다. 필요한 내용은 중국인의 나머지 정리, 뤼카 정리.

문제를 읽어보면 떡파이어는 $M$ 번째 날에 $N$ 세로 죽는다. 그렇다면 $M$ 번째 날에는 굶었고, $M - 1$ 동안은 최소 $1$ 그릇은 먹은 것이다.

따라서 우리가 원하는 것은 $N$개의 $1$을 $M - 1$ 개의 슬롯에 최소 하나씩 넣은 경우의 수이다.

최소 하나씩이라는 조건을 없에기 위해 $M - 1$ 개의 슬롯에 $N - M + 1$ 을 나눠 넣는 것으로 해석할 수 있다.

이는 중복 조합으로 표현할 수 있다. $_{M - 1}H_{N - M + 1} = $_{N - 1}C_{M - 2}$이다.[^1]

[^1]: 중복 조합과 관련해서는 [이 링크](https://blog.naver.com/baboedition/220933436576)를 참고하자.

$_{N - 1}C_{M - 2}\ mod\ 100'007$을 구하면 되는데... 100007이 소수가 아니다. 뤼카의 정리는 $p$가 소수일때만 적용할 수 있으니, 굉장히 곤란하다.

다행히도 우리에겐 중국인의 나머지 정리가 있다! 뤼카의 정리로 97과 1031에 대한 모듈러 값을 구한 뒤, 이 둘을 중국인의 나머지 정리로 합쳐내면 정답을 구할 수 있다.

이제 특수 케이스들을 살펴보자. 특수 케이스는 조합이 정의가 되지 않는 경우가 있겠다.

$_{N - 1}C_{M - 2}$ 에서 $N \ge 1, M \ge 2$ 이어야 조합이 정의가 됨을 알 수 있다.

1. $N = 0$ 인 경우, 조합으로 변환이 불가능하다. 예외적으로 $N = 0, M = 1$이라면 한 그릇도 안 먹고 첫 날에 바로 사망하는 경우가 가능하다. 따라서 경우를 나눠 0과 1을 출력하면 된다.
2. $M = 1$ 인 경우도 조합으로 변환이 불가능하다. 위에서 이미 한 그릇도 안 먹고 바로 사망한 경우를 처리했으니 여기서는 그냥 고정으로 0을 출력하면 된다.
